{"version":3,"sources":["uni-app:///main.js","webpack:///E:/WanchGit/WanchShop/mall-app/pages/order/order.vue?e659","webpack:///E:/WanchGit/WanchShop/mall-app/pages/order/order.vue?502c","webpack:///E:/WanchGit/WanchShop/mall-app/pages/order/order.vue?3b1d","webpack:///E:/WanchGit/WanchShop/mall-app/pages/order/order.vue?0ed0","uni-app:///pages/order/order.vue","webpack:///E:/WanchGit/WanchShop/mall-app/pages/order/order.vue?7c75","webpack:///E:/WanchGit/WanchShop/mall-app/pages/order/order.vue?7b7b"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,6F;AACAA,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACc;;;AAGlE;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,WAAW,sNAEN;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACxDA;AAAA;AAAA;AAAA;AAA+lB,CAAgB,ynBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACqFnnB;AACA;AACA,+C;;AAEA;AACA;AACA,4BADA;AAEA,gBAFA,EADA;;AAKA,MALA,kBAKA;AACA;AACA,wBADA;AAEA;AACA,gBADA;AAEA,kBAFA;AAGA,2BAHA;AAIA,qBAJA;AAKA,iBALA;AAMA,oBANA;AAOA,oBAPA;;AASA;AACA,gBADA;AAEA,mBAFA;AAGA,2BAHA;AAIA,qBAJA;AAKA,iBALA;AAMA,oBANA;AAOA,oBAPA,EATA;;AAkBA;AACA,gBADA;AAEA,mBAFA;AAGA,2BAHA;AAIA,qBAJA;AAKA,iBALA;AAMA,oBANA;AAOA,oBAPA,EAlBA;;AA2BA;AACA,gBADA;AAEA,mBAFA;AAGA,2BAHA;AAIA,qBAJA;AAKA,iBALA;AAMA,oBANA;AAOA,oBAPA,EA3BA;;AAoCA;AACA,gBADA;AAEA,mBAFA;AAGA,2BAHA;AAIA,qBAJA;AAKA,iBALA;AAMA,oBANA;AAOA,oBAPA,EApCA,CAFA;;;;AAiDA,GAvDA;;AAyDA,QAzDA,kBAyDA,OAzDA,EAyDA;AACA;;;;AAIA;;AAEA,GAhEA;AAiEA,QAjEA,oBAiEA;AACA;;;;;AAKA;AACA;AACA;;AAEA,GA3EA;AA4EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAVA;AAWA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KAjBA,EA5EA;;AA+FA;AACA,+CADA,CA/FA;;AAkGA;AACA,8CADA;AAEA;AACA,YAHA,oBAGA,MAHA,EAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAJA,MAIA;AACA;AACA;AACA,WARA;AASA,SAVA,MAUA;AACA;AACA;AACA;AACA;AACA;AACA,aAJA,MAIA;AACA;AACA;AACA,WARA;AASA,SAVA,MAUA;AACA;AACA;AACA;AACA;AACA;AACA,aAJA,MAIA;AACA;AACA;AACA,WARA;AASA,SAVA,MAUA;AACA;AACA;AACA;AACA;AACA;AACA,aAJA,MAIA;AACA;AACA;AACA,WARA;AASA,SAVA,MAUA;AACA;AACA;AACA;AACA;AACA;AACA,aAJA,MAIA;AACA;AACA;AACA,WARA;AASA;;AAEA,OAtDA,EAsDA,GAtDA;AAuDA,KA5EA;AA6EA;AACA,mBA9EA,2BA8EA,OA9EA,EA8EA,MA9EA,EA8EA,KA9EA,EA8EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SARA;AASA;AACA;AACA,OAZA;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA3GA;AA4GA;AACA,aA7GA,qBA6GA,CA7GA,EA6GA;AACA;AACA;AACA,KAhHA;AAiHA;AACA,YAlHA,oBAkHA,KAlHA,EAkHA;AACA;AACA,KApHA;AAqHA;AACA,eAtHA,uBAsHA,IAtHA,EAsHA,KAtHA,EAsHA;AACA;AACA;AACA,oBADA;;AAGA;AACA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA;AACA,OARA;AASA,KApIA;AAqIA;AACA,eAtIA,uBAsIA,IAtIA,EAsIA;AACA;AACA;AACA,oBADA;;AAGA;AACA,8BADA,CACA,QADA,uBACA,QADA,CACA,aADA,uBACA,aADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WALA,MAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAfA;AAgBA,OAlBA,EAkBA,GAlBA;AAmBA,KA9JA;AA+JA,SA/JA,iBA+JA,OA/JA,EA+JA;AACA;AACA,kDADA;;AAGA,KAnKA;AAoKA,kBApKA,0BAoKA,IApKA,EAoKA;AACA;AACA;AACA,oBADA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WALA,MAKA;AACA;AACA;;AAEA;AACA,oBADA;;AAGA;AACA,SAdA;AAeA,OAhBA,EAgBA,GAhBA;AAiBA,KA1LA;AA2LA;AACA,iBA5LA,yBA4LA,KA5LA,EA4LA;AACA;AACA,+BADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjBA;AAmBA;AACA,KAnNA;AAoNA,gBApNA,0BAoNA;AACA;AACA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA,sCADA;;AAGA;AACA,OATA;AAUA,KAhOA;AAiOA,SAjOA,iBAiOA,GAjOA,EAiOA;AACA;AACA;AACA;AACA;AACA,gBADA;;AAGA,KAxOA,GAlGA,E;;;;;;;;;;;;;ACzFA;AAAA;AAAA;AAAA;AAAimC,CAAgB,2kCAAG,EAAC,C;;;;;;;;;;;ACArnC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/order/order.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/order/order.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./order.vue?vue&type=template&id=127632e4&\"\nvar renderjs\nimport script from \"./order.vue?vue&type=script&lang=js&\"\nexport * from \"./order.vue?vue&type=script&lang=js&\"\nimport style0 from \"./order.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/order/order.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./order.vue?vue&type=template&id=127632e4&\"","var components = {\n  uniLoadMore: function() {\n    return import(\n      /* webpackChunkName: \"components/uni-load-more/uni-load-more\" */ \"@/components/uni-load-more/uni-load-more.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l3 = _vm.__map(_vm.navList, function(tabItem, tabIndex) {\n    var l2 = _vm.__map(tabItem.orderList, function(item, index) {\n      var f0 = _vm._f(\"time\")(item.omsOrder.createTime)\n\n      var l0 = _vm.__map(item.items, function(goodsItem, goodsIndex) {\n        var m0 = encodeURI(goodsItem.productPic)\n        return {\n          $orig: _vm.__get_orig(goodsItem),\n          m0: m0\n        }\n      })\n\n      var l1 = _vm.__map(item.items, function(goodsItem, goodsIndex) {\n        var m1 = encodeURI(goodsItem.productPic)\n        return {\n          $orig: _vm.__get_orig(goodsItem),\n          m1: m1\n        }\n      })\n\n      return {\n        $orig: _vm.__get_orig(item),\n        f0: f0,\n        l0: l0,\n        l1: l1\n      }\n    })\n\n    return {\n      $orig: _vm.__get_orig(tabItem),\n      l2: l2\n    }\n  })\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l3: l3\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./order.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./order.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"content\">\r\n\t\t<view class=\"navbar\">\r\n\t\t\t<view \r\n\t\t\t\tv-for=\"(item, index) in navList\" :key=\"index\" \r\n\t\t\t\tclass=\"nav-item\" \r\n\t\t\t\t:class=\"{current: tabCurrentIndex === index}\"\r\n\t\t\t\t@click=\"tabClick(index)\"\r\n\t\t\t>\r\n\t\t\t\t{{item.text}}\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<swiper :current=\"tabCurrentIndex\" class=\"swiper-box\" duration=\"300\" @change=\"changeTab\">\r\n\t\t\t<swiper-item class=\"tab-content\" v-for=\"(tabItem,tabIndex) in navList\" :key=\"tabIndex\">\r\n\t\t\t\t<scroll-view \r\n\t\t\t\t\tclass=\"list-scroll-content\" \r\n\t\t\t\t\tscroll-y\r\n\t\t\t\t\t@scrolltolower=\"loadData\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<!-- 空白页 -->\r\n\t\t\t\t\t<empty v-if=\"tabItem.loaded === true && tabItem.orderList.length === 0\"></empty>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<!-- 订单列表 -->\r\n\t\t\t\t\t<view \r\n\t\t\t\t\t\tv-for=\"(item,index) in tabItem.orderList\" :key=\"index\"\r\n\t\t\t\t\t\tclass=\"order-item\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<view class=\"i-top b-b\">\r\n\t\t\t\t\t\t\t<text class=\"time\">{{item.omsOrder.createTime|time}}</text>\r\n\t\t\t\t\t\t\t<text class=\"state\" :style=\"{color: item.stateTipColor}\">{{item.stateTip}}</text>\r\n\t\t\t\t\t\t\t<text \r\n\t\t\t\t\t\t\t\tv-if=\"item.omsOrder.status===5 ||item.omsOrder.status===4\" \r\n\t\t\t\t\t\t\t\tclass=\"del-btn yticon icon-iconfontshanchu1\"\r\n\t\t\t\t\t\t\t\t@click=\"deleteOrder(item,index)\"\r\n\t\t\t\t\t\t\t></text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<scroll-view v-if=\"item.items && item.items.length > 1\" class=\"goods-box\" scroll-x >\r\n\t\t\t\t\t\t\t<view\r\n\t\t\t\t\t\t\t\tv-for=\"(goodsItem, goodsIndex) in item.items\" :key=\"goodsIndex\"\r\n\t\t\t\t\t\t\t\tclass=\"goods-item\" @click=\"navTo('details?orderSn='+item.omsOrder.orderSn)\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<image class=\"goods-img\" :src=\"encodeURI(goodsItem.productPic)\" mode=\"aspectFill\" ></image>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</scroll-view>\r\n\t\t\t\t\t\t<view \r\n\t\t\t\t\t\t\tv-if=\"item.items.length === 1\" \r\n\t\t\t\t\t\t\tclass=\"goods-box-single\"\r\n\t\t\t\t\t\t\tv-for=\"(goodsItem, goodsIndex) in item.items\" :key=\"goodsIndex\" @click=\"navTo('details?orderSn='+item.omsOrder.orderSn)\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<image class=\"goods-img\" :src=\"encodeURI(goodsItem.productPic)\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t\t<view class=\"right\">\r\n\t\t\t\t\t\t\t\t<text class=\"title clamp\">{{goodsItem.productName}}</text>\r\n\t\t\t\t\t\t\t\t<text class=\"attr-box\">{{goodsItem.attr}}  x {{goodsItem.productQuantity}}</text>\r\n\t\t\t\t\t\t\t\t<text class=\"price\">{{goodsItem.productPrice}}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<view v-if=\"item.omsOrder.status === 1 ||item.omsOrder.status === 2 ||item.omsOrder.status === 3\" class=\"price-box\">\r\n\t\t\t\t\t\t\t<!-- 共\r\n\t\t\t\t\t\t\t<text class=\"num\">7</text>\r\n\t\t\t\t\t\t\t件商品 --> \r\n\t\t\t\t\t\t\t实付款\r\n\t\t\t\t\t\t\t<text class=\"price\">{{item.omsOrder.totalAmount}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"action-box b-t\">\r\n\t\t\t\t\t\t\t<button class=\"action-btn\" v-if=\"item.omsOrder.status === 0\" @click=\"cancelOrder(item)\">取消订单</button>\r\n\t\t\t\t\t\t\t<button class=\"action-btn recom\" v-if=\"item.omsOrder.status === 0\" @click=\"toPay(item.omsOrder.orderSn)\">立即支付</button>\r\n\t\t\t\t\t\t\t<button class=\"action-btn recom\" v-if=\"item.omsOrder.status === 2\" @click=\"confirmReceipt(item)\">确认收货</button>\r\n\t\t\t\t\t\t\t<button class=\"action-btn recom\" v-if=\"item.omsOrder.status === 2 || item.omsOrder.status === 3\" @click=\"navTo('/pages/order/aftersale/aftersale?orderSn='+item.omsOrder.orderSn)\">申请售后</button>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t \r\n\t\t\t\t\t<uni-load-more :status=\"tabItem.loadingType\"></uni-load-more>\r\n\t\t\t\t\t\r\n\t\t\t\t</scroll-view>\r\n\t\t\t</swiper-item>\r\n\t\t</swiper>\r\n\t</view>\r\n</template> \r\n\r\n<script>\r\n\timport uniLoadMore from '@/components/uni-load-more/uni-load-more.vue';\r\n\timport empty from \"@/components/empty\";\r\n\timport Json from '@/Json';\r\n\timport Api from '@/common/js/model.js';\r\n\timport { mapState } from 'vuex';\r\n\timport { mapMutations} from 'vuex';\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tuniLoadMore,\r\n\t\t\tempty\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\ttabCurrentIndex: 0,\r\n\t\t\t\tnavList: [{\r\n\t\t\t\t\t\tstate: 0,\r\n\t\t\t\t\t\ttext: '全部',\r\n\t\t\t\t\t\tloadingType: 'more',\r\n\t\t\t\t\t\torderList: [],\r\n\t\t\t\t\t\tpageNo:0,\r\n\t\t\t\t\t\tpageSize:10,\r\n\t\t\t\t\t\ttotalPage:1\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tstate: 1,\r\n\t\t\t\t\t\ttext: '待付款',\r\n\t\t\t\t\t\tloadingType: 'more',\r\n\t\t\t\t\t\torderList: [],\r\n\t\t\t\t\t\tpageNo:0,\r\n\t\t\t\t\t\tpageSize:10,\r\n\t\t\t\t\t\ttotalPage:1\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tstate: 2,\r\n\t\t\t\t\t\ttext: '待发货',\r\n\t\t\t\t\t\tloadingType: 'more',\r\n\t\t\t\t\t\torderList: [],\r\n\t\t\t\t\t\tpageNo:0,\r\n\t\t\t\t\t\tpageSize:10,\r\n\t\t\t\t\t\ttotalPage:1\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tstate: 3,\r\n\t\t\t\t\t\ttext: '待收货',\r\n\t\t\t\t\t\tloadingType: 'more',\r\n\t\t\t\t\t\torderList: [],\r\n\t\t\t\t\t\tpageNo:0,\r\n\t\t\t\t\t\tpageSize:10,\r\n\t\t\t\t\t\ttotalPage:1\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tstate: 4,\r\n\t\t\t\t\t\ttext: '已完成',\r\n\t\t\t\t\t\tloadingType: 'more',\r\n\t\t\t\t\t\torderList: [],\r\n\t\t\t\t\t\tpageNo:0,\r\n\t\t\t\t\t\tpageSize:10,\r\n\t\t\t\t\t\ttotalPage:1\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\tonLoad(options){\r\n\t\t\t/**\r\n\t\t\t * 修复app端点击除全部订单外的按钮进入时不加载数据的问题\r\n\t\t\t * 替换onLoad下代码即可\r\n\t\t\t */\r\n\t\t\tthis.tabCurrentIndex = +options.state;\r\n\t\t\t\r\n\t\t},\r\n\t\tonShow(){\r\n\t\t\tthis.loadUserInfo();\r\n\t\t\t// #ifndef MP\r\n\t\t\tthis.loadData()\r\n\t\t\t// #endif\r\n\t\t\t// #ifdef MP\r\n\t\t\tif(this.tabCurrentIndex == 0){\r\n\t\t\t\tthis.loadData()\r\n\t\t\t}\r\n\t\t\t// #endif\r\n\t\t},\r\n\t\tfilters: {\r\n\t\t\t//2019-04-06 11:37\r\n\t\t\ttime: function time(value) {\r\n\t\t\t\tvar year = value.substr(0, 4)\r\n\t\t\t\tvar month = value.substr(5, 2)\r\n\t\t\t\tvar day = value.substr(8, 2)\r\n\t\t\t\tvar hour = value.substr(11, 2)\r\n\t\t\t\tvar min = value.substr(14, 2)\r\n\t\t\t\tvar seconds = value.substr(17, 2)\r\n\t\t\t\treturn year + \"-\" + month + \"-\" + day + \" \" + hour + \":\" + min + \":\" + seconds;\r\n\t\t\t},\r\n\t\t\tisEmpty:function isEmpty(value){\r\n\t\t\t\tif(value){\r\n\t\t\t\t\treturn value;\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn \"\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapState(['hasLogin','userInfo'])\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t...mapMutations(['login','logout']),\r\n\t\t\t//获取订单列表\r\n\t\t\tloadData(source){\r\n\t\t\t\tvar _self=this;\r\n\t\t\t\t//这里是将订单挂载到tab列表下\r\n\t\t\t\tlet index = _self.tabCurrentIndex;\r\n\t\t\t\tlet navItem = _self.navList[index];\r\n\t\t\t\tlet state = navItem.state;\r\n\t\t\t\t\r\n\t\t\t\tif(source === 'tabChange' && navItem.loaded === true){\r\n\t\t\t\t\t//tab切换只有第一次需要加载数据\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif(navItem.loadingType === 'loading' || navItem.loadingType === 'noMore'){\r\n\t\t\t\t\t//防止重复加载\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tnavItem.loadingType = 'loading';\r\n\t\t\t\t\r\n\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\tvar param={\"pageSize\":navItem.pageSize,\"pageNum\":navItem.pageNo}\r\n\t\t\t\t\tif(index === 0){\r\n\t\t\t\t\t\tApi.methods.getAllOrderList(param).then(function(res){\r\n\t\t\t\t\t\t\tif(res.data.code === 200){\r\n\t\t\t\t\t\t\t\tvar result=res.data.data;\r\n\t\t\t\t\t\t\t\t_self.orderListHandle(navItem,result,state);\r\n\t\t\t\t\t\t\t\tnavItem.pageNo++\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t_self.$api.msg(\"加载失败，请重试\")\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}else if(index === 1){\r\n\t\t\t\t\t\tApi.methods.getWaitingPayList(param).then(function(res){\r\n\t\t\t\t\t\t\tif(res.data.code === 200){\r\n\t\t\t\t\t\t\t\tvar result=res.data.data;\r\n\t\t\t\t\t\t\t\t_self.orderListHandle(navItem,result,state);\r\n\t\t\t\t\t\t\t\tnavItem.pageNo++\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t_self.$api.msg(\"加载失败，请重试\")\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}else if(index === 2){\r\n\t\t\t\t\t\tApi.methods.getWaitingShipList(param).then(function(res){\r\n\t\t\t\t\t\t\tif(res.data.code === 200){\r\n\t\t\t\t\t\t\t\tvar result=res.data.data;\r\n\t\t\t\t\t\t\t\t_self.orderListHandle(navItem,result,state);\r\n\t\t\t\t\t\t\t\tnavItem.pageNo++\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t_self.$api.msg(\"加载失败，请重试\")\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}else if(index === 3){\r\n\t\t\t\t\t\tApi.methods.getWaitingReceiptList(param).then(function(res){\r\n\t\t\t\t\t\t\tif(res.data.code === 200){\r\n\t\t\t\t\t\t\t\tvar result=res.data.data;\r\n\t\t\t\t\t\t\t\t_self.orderListHandle(navItem,result,state);\r\n\t\t\t\t\t\t\t\tnavItem.pageNo++\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t_self.$api.msg(\"加载失败，请重试\")\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}else if(index === 4){\r\n\t\t\t\t\t\tApi.methods.getCompletedList(param).then(function(res){\r\n\t\t\t\t\t\t\tif(res.data.code === 200){\r\n\t\t\t\t\t\t\t\tvar result=res.data.data;\r\n\t\t\t\t\t\t\t\t_self.orderListHandle(navItem,result,state);\r\n\t\t\t\t\t\t\t\tnavItem.pageNo++\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t_self.$api.msg(\"加载失败，请重试\")\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}, 600);\t\r\n\t\t\t},\r\n\t\t\t//订单列表处理\r\n\t\t\torderListHandle(navItem,result,state){\r\n\t\t\t\t// let orderList = result.list.filter(item=>{\r\n\t\t\t\t// \t//添加不同状态下订单的表现形式\r\n\t\t\t\t// \titem = Object.assign(item, this.orderStateExp(item.omsOrder.status));\r\n\t\t\t\t// \t//演示数据所以自己进行状态筛选\r\n\t\t\t\t// \treturn item\r\n\t\t\t\t// });\r\n\t\t\t\tresult.list.forEach(item=>{\r\n\t\t\t\t\titem.items.forEach(product =>{\r\n\t\t\t\t\t\tif(product.productAttr){\r\n\t\t\t\t\t\t\tlet attr = JSON.parse(product.productAttr)\r\n\t\t\t\t\t\t\tproduct.attr = ''\r\n\t\t\t\t\t\t\tfor(var i =0;i<attr.length;i++){\r\n\t\t\t\t\t\t\t\tproduct.attr += attr[i].value+\" \"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\titem = Object.assign(item, this.orderStateExp(item.omsOrder.status));\r\n\t\t\t\t\tnavItem.orderList.push(item);\r\n\t\t\t\t})\r\n\t\t\t\t//loaded新字段用于表示数据加载完毕，如果为空可以显示空白页\r\n\t\t\t\tthis.$set(navItem, 'loaded', true);\r\n\t\t\t\tnavItem.pageNo=result.pageNum;\r\n\t\t\t\tvar loadingType='more';\r\n\t\t\t\tif(result.pageNum+1 >= result.totalPage){\r\n\t\t\t\t\tloadingType='noMore';\r\n\t\t\t\t}\r\n\t\t\t\t//判断是否还有数据， 有改为 more， 没有改为noMore \r\n\t\t\t\tnavItem.loadingType = loadingType;\r\n\t\t\t},\r\n\t\t\t//swiper 切换\r\n\t\t\tchangeTab(e){\r\n\t\t\t\tthis.tabCurrentIndex = e.target.current;\r\n\t\t\t\tthis.loadData('tabChange');\r\n\t\t\t},\r\n\t\t\t//顶部tab点击\r\n\t\t\ttabClick(index){\r\n\t\t\t\tthis.tabCurrentIndex = index;\r\n\t\t\t},\r\n\t\t\t//删除订单\r\n\t\t\tdeleteOrder(item,index){\r\n\t\t\t\tvar _self=this;\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '请稍后'\r\n\t\t\t\t})\r\n\t\t\t\tApi.methods.deleteOrder({\"orderId\":item.omsOrder.id}).then(function(res){\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\tif(res.data.code === 200){\r\n\t\t\t\t\t\t_self.navList[_self.tabCurrentIndex].orderList.splice(index, 1);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t_self.$api.msg(\"删除失败\")\r\n\t\t\t\t\t}\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//取消订单\r\n\t\t\tcancelOrder(item){\r\n\t\t\t\tvar _self=this;\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '请稍后'\r\n\t\t\t\t})\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tlet {stateTip, stateTipColor} = _self.orderStateExp(5);\r\n\t\t\t\t\tApi.methods.cancelOrder({\"orderId\":item.omsOrder.id}).then(function(res){\r\n\t\t\t\t\t\tif(res.data.code === 200){\r\n\t\t\t\t\t\t\t//取消订单后删除待付款中该项\r\n\t\t\t\t\t\t\tlet list = _self.navList[1].orderList;\r\n\t\t\t\t\t\t\tlet index = list.findIndex(val=>val.omsOrder.id === item.omsOrder.id);\r\n\t\t\t\t\t\t\tindex !== -1 && list.splice(index, 1);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t_self.$api.msg(\"取消失败\")\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlet list = _self.navList[0].orderList;\r\n\t\t\t\t\t\tlet index = list.findIndex(val=>val.omsOrder.id === item.omsOrder.id);\r\n\t\t\t\t\t\tindex !== -1 && list.splice(index, 1);\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t})\r\n\t\t\t\t}, 600)\r\n\t\t\t},\r\n\t\t\ttoPay(orderSn){\r\n\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\turl: '/pages/money/pay?orderSn='+orderSn\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tconfirmReceipt(item){\r\n\t\t\t\tvar _self=this;\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '请稍后'\r\n\t\t\t\t})\r\n\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\tApi.methods.confirmReceipt({\"orderId\":item.omsOrder.id}).then(function(res){\r\n\t\t\t\t\t\tif(res.data.code === 200){\r\n\t\t\t\t\t\t\t//取消订单后删除待付款中该项\r\n\t\t\t\t\t\t\tlet list = _self.navList[3].orderList;\r\n\t\t\t\t\t\t\tlet index = list.findIndex(val=>val.omsOrder.id === item.omsOrder.id);\r\n\t\t\t\t\t\t\tindex !== -1 && list.splice(index, 1);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t_self.$api.msg(\"操作失败\")\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\titem = Object.assign(item, {\r\n\t\t\t\t\t\t\tstate: 3\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t})\r\n\t\t\t\t}, 600)\r\n\t\t\t},\r\n\t\t\t//订单状态文字和颜色\r\n\t\t\torderStateExp(state){\r\n\t\t\t\tlet stateTip = '',\r\n\t\t\t\t\tstateTipColor = '#fa436a';\r\n\t\t\t\tswitch(+state){\r\n\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\tstateTip = '待付款'; break;\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\tstateTip = '待发货'; break;\r\n\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\tstateTip = '已发货'; break;\r\n\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\tstateTip = '已完成'; break;\r\n\t\t\t\t\tcase 4:\r\n\t\t\t\t\t\tstateTip = '订单已关闭'; \r\n\t\t\t\t\t\tstateTipColor = '#909399';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 5:\r\n\t\t\t\t\t\tstateTip = '无效订单'; \r\n\t\t\t\t\t\tstateTipColor = '#909399';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t//更多自定义\r\n\t\t\t\t}\r\n\t\t\t\treturn {stateTip, stateTipColor};\r\n\t\t\t},\r\n\t\t\tloadUserInfo(){\r\n\t\t\t\tvar _self=this;\r\n\t\t\t\tApi.methods.loadUserInfo().then(function(res){\r\n\t\t\t\t\tif(res.data.code===200){\r\n\t\t\t\t\t\t_self.login(res.data.data)\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t_self.logout()\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl :'/pages/public/login'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tnavTo(url){\r\n\t\t\t\tif(!this.hasLogin){\r\n\t\t\t\t\turl = '/pages/public/login';\r\n\t\t\t\t}\r\n\t\t\t\tuni.navigateTo({  \r\n\t\t\t\t\turl\r\n\t\t\t\t})  \r\n\t\t\t},\r\n\t\t},\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t@import \"common/scss/order/order.scss\"; \r\n</style>\r\n","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./order.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./order.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1594012979771\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}
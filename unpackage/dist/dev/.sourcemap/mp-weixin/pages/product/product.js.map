{"version":3,"sources":["uni-app:///main.js","webpack:///E:/WanchGit/WanchShop/mall-app/pages/product/product.vue?9f92","webpack:///E:/WanchGit/WanchShop/mall-app/pages/product/product.vue?e6b0","webpack:///E:/WanchGit/WanchShop/mall-app/pages/product/product.vue?53c6","webpack:///E:/WanchGit/WanchShop/mall-app/pages/product/product.vue?d2de","uni-app:///pages/product/product.vue","webpack:///E:/WanchGit/WanchShop/mall-app/pages/product/product.vue?761c","webpack:///E:/WanchGit/WanchShop/mall-app/pages/product/product.vue?6846"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,kG;AACAA,UAAU,CAACC,gBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAoH;AACpH;AAC2D;AACL;AACc;;;AAGpE;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,6EAAM;AACR,EAAE,kFAAM;AACR,EAAE,2FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,sFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC1BA;AAAA;AAAA;AAAA;AAAimB,CAAgB,2nBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACmRrnB;AACA,+C;;;AAGA;AACA,gBADA,E;;AAGA;AACA,+CADA,C;;AAGA,M,kBAAA;AACA;AACA,YADA;AAEA,cAFA;AAGA;AACA,yBADA;AAEA,mBAFA;AAGA,gBAHA;AAIA,gBAJA;AAKA,wBALA;AAMA,sBANA,EAHA;;AAWA,wBAXA;AAYA,2BAZA;AAaA,sBAbA;AAcA,oBAdA;AAeA,mBAfA;AAgBA,qBAhBA;AAiBA,iBAjBA;AAkBA,kBAlBA;AAmBA,cAnBA;AAoBA;AACA;AACA,aADA;AAEA,kBAFA,EADA;;AAKA;AACA,aADA;AAEA,kBAFA,EALA,CApBA;;;AA8BA,iBA9BA;AA+BA,iBA/BA;AAgCA,iBAhCA;AAiCA,iBAjCA;AAkCA,eAlCA;AAmCA,0BAnCA;AAoCA,iBApCA;AAqCA,kBArCA;AAsCA,gBAtCA;AAuCA,aAvCA;;AAyCA,G;AACA,Q,kBAAA,O,EAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAbA;AAcA,G;;AAEA,iC;;;AAGA,4C;AACA,U,sBAAA;AACA;AACA;AACA;AACA,G;AACA,S,qBAAA;AACA;AACA;AACA;AACA,G;AACA,iB,2BAAA,I,EAAA,K,EAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;AACA,gB,4BAAA;AACA,mBADA,GACA,MADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAFA;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,qBAFA,MAEA;AACA;AACA,qBAFA,MAEA;AACA;AACA;AACA,mBARA;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAhCA,EAFA;AAmCA,G;AACA,qB,iCAAA;AACA,mBADA,GACA,MADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAVA,MAUA;AACA;AACA;AACA,eAhBA,EAHA;AAoBA,G;AACA,W,uBAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;AACA,iB,6BAAA;AACA,mBADA,GACA,MADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCADA;AAEA,kCAFA;;AAIA;AACA,iBANA;AAOA;AACA;AACA;AACA;AACA;AACA,uCADA;AAEA,iCAFA;AAGA,mCAHA;AAIA,6BAJA;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAJA;AAKA;AACA;AACA,yCADA;AAEA,mCAFA;AAGA,qCAHA;AAIA,+BAJA;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAhCA;AAiCA;AACA;AACA;AACA,eAlDA,EAFA;AAqDA,G;AACA;AACA,c,wBAAA,I,EAAA,I,EAAA;AACA;AACA;AACA;AACA;AACA;AACA,KAJA;AAKA;AACA,G;AACA;AACA,yB,qCAAA;AACA,mBADA,GACA,MADA;AAEA;AACA;AACA,eAFA,EAFA;AAKA,G;AACA;AACA,uB,mCAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KALA;AAMA,G;AACA;AACA,e,yBAAA,Q,EAAA;AACA;AACA;AACA;AACA,OADA,MACA;AACA;AACA;AACA,oCADA;;AAGA;AACA,KARA;AASA;AACA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KAPA;AAQA,G;AACA;AACA,Y,wBAAA;AACA;AACA;AACA;AACA;AACA,OAFA,EAEA,GAFA;AAGA,KALA,MAKA;AACA;AACA;AACA,G;AACA;AACA,a,yBAAA;AACA;AACA;AACA;AACA;AACA,OAFA,EAEA,GAFA;AAGA,KALA,MAKA;AACA;AACA;AACA,G;AACA;AACA,e,2BAAA;AACA;AACA;AACA;AACA;AACA,OAFA,EAEA,GAFA;AAGA,KALA,MAKA;AACA;AACA;AACA,G;AACA;AACA,Y,sBAAA,I,EAAA,I,EAAA,K,EAAA,O,EAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OALA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;AAEA;AACA,O,mBAAA;AACA;AACA,G;AACA;AACA,Y,wBAAA;AACA;AACA,G;AACA,K,iBAAA;AACA;AACA;AACA;AACA,kCADA;;AAGA;AACA;AACA;AACA,kGADA;;AAGA,G;AACA,a,yBAAA,E;AACA;AACA,a,yBAAA;AACA;AACA;AACA;AACA,kCADA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KALA;AAMA,G;AACA,c,0BAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAJA,MAIA;AACA;AACA;AACA,KARA;AASA,G;;;;;;;;;;;;;AC9pBA;AAAA;AAAA;AAAA;AAAmmC,CAAgB,6kCAAG,EAAC,C;;;;;;;;;;;ACAvnC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/product/product.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/product/product.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./product.vue?vue&type=template&id=2fbdbe34&\"\nvar renderjs\nimport script from \"./product.vue?vue&type=script&lang=js&\"\nexport * from \"./product.vue?vue&type=script&lang=js&\"\nimport style0 from \"./product.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/product/product.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./product.vue?vue&type=template&id=2fbdbe34&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.imgList, function(item, index) {\n    var m0 = encodeURI(item)\n    return {\n      $orig: _vm.__get_orig(item),\n      m0: m0\n    }\n  })\n\n  var m1 = encodeURI(_vm.skuSelectInfo.specSrc)\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n        m1: m1\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./product.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./product.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"container\">\r\n\t\t<view class=\"carousel\">\r\n\t\t\t<swiper indicator-dots circular=\"true\" duration=\"400\">\r\n\t\t\t\t<swiper-item class=\"swiper-item\" v-for=\"(item, index) in imgList\" :key=\"index\">\r\n\t\t\t\t\t<view class=\"image-wrapper\"><image :src=\"encodeURI(item)\" class=\"loaded\" mode=\"aspectFill\"></image></view>\r\n\t\t\t\t</swiper-item>\r\n\t\t\t</swiper>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"detail-text\">\r\n\t\t\t<!-- 秒杀 -->\r\n\t\t\t<view class=\"spike\" v-if=\"spike\">\r\n\t\t\t\t<text class=\"price-tip\">¥</text>\r\n\t\t\t\t<text class=\"price\">{{ productInfo.price }}</text>\r\n\t\t\t\t<text class=\"price-tip\" style=\"padding-left: 10rpx;text-decoration: line-through;font-size: 27rpx;\">¥{{ productInfo.originalPrice }}</text>\r\n\t\t\t\t<text class=\"price-tip\" style=\"float: right; padding-right: 20rpx;\">{{ timing }}</text>\r\n\t\t\t\t<text class=\"price-tip\" style=\"font-size: 27rpx; float: right;\">距离结束还剩：</text>\r\n\t\t\t</view>\r\n\t\t\t<!-- 不妙杀 -->\r\n\t\t\t<view class=\"no-spike\" v-if=\"!spike\">\r\n\t\t\t\t<text class=\"price-tip\">¥</text>\r\n\t\t\t\t<text class=\"price\">{{ productInfo.price }}</text>\r\n\t\t\t\t<text class=\" price-tip\" style=\"padding-left: 10rpx;text-decoration: line-through;font-size: 27rpx;\">¥{{ productInfo.originalPrice }}</text>\r\n\t\t\t</view>\r\n\t\t\t<!-- 名称 -->\r\n\t\t\t<view class=\"product-info\">\r\n\t\t\t\t<text class=\"coupon-tip\" v-for=\"(item, index) in services\" :key=\"index\">{{ item }}</text>\r\n\t\t\t\t<text class=\"title\">{{ productInfo.name }}</text>\r\n\t\t\t</view>\r\n\t\t\t<!-- 销量 库存 -->\r\n\t\t\t<view class=\"bot-row\">\r\n\t\t\t\t<text class=\"bot-text\">销量: {{ productInfo.sale }}</text>\r\n\t\t\t\t<text class=\"bot-text\">库存: {{ productInfo.stock }}</text>\r\n\t\t\t\t<!-- <text class=\"bot-text\">赠送积分: {{productInfo.giftPoint}}</text> -->\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- \t\t<view class=\"introduce-section\">\r\n\t\t\t<view class=\"price-box\">\r\n\t\t\t\t<text class=\"price-tip\">¥</text>\r\n\t\t\t\t<text class=\"price\">{{productInfo.price}}</text>\r\n\t\t\t\t<text class=\"m-price\">¥{{productInfo.originalPrice}}</text>\r\n\t\t\t\t<text class=\"coupon-tip\" v-for=\"(item, index) in services\" :key=\"index\">{{item}}</text>\r\n\t\t\t</view>\r\n\t\t\t<text class=\"title\">{{productInfo.name}}</text>\r\n\t\t\t<view class=\"bot-row\">\r\n\t\t\t\t<text>销量: {{productInfo.sale}}</text>\r\n\t\t\t\t<text>库存: {{productInfo.stock}}</text>\r\n\t\t\t\t<text>赠送积分: {{productInfo.giftPoint}}</text>\r\n\t\t\t</view>\r\n\t\t</view> -->\r\n\r\n\t\t<!--  分享 -->\r\n\t\t<!-- <view class=\"share-section\" @click=\"share\">\r\n\t\t\t<view class=\"share-icon\">\r\n\t\t\t\t<text class=\"yticon icon-xingxing\"></text>\r\n\t\t\t\t 享\r\n\t\t\t</view>\r\n\t\t\t<text class=\"tit\">该商品分享可领49减10红包</text>\r\n\t\t\t<text class=\"yticon icon-bangzhu1\"></text>\r\n\t\t\t<view class=\"share-btn\">\r\n\t\t\t\t立即分享\r\n\t\t\t\t<text class=\"yticon icon-you\"></text>\r\n\t\t\t</view>\r\n\t\t</view> -->\r\n\r\n\t\t<view class=\"c-list\">\r\n\t\t\t<view class=\"c-row b-b\" @click=\"toggleSpec\">\r\n\t\t\t\t<text class=\"tit\">购买类型</text>\r\n\t\t\t\t<view class=\"con\">\r\n\t\t\t\t\t<text class=\"selected-text\" v-for=\"(sItem, sIndex) in specSelected\" :key=\"sIndex\">{{sItem}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<text class=\"yticon icon-you\"></text>\r\n\t\t\t</view>\r\n\t\t\t<!-- <view class=\"c-row b-b\">\r\n\t\t\t\t<text class=\"tit\">优惠券</text>\r\n\t\t\t\t<text class=\"con t-r red\">领取优惠券</text>\r\n\t\t\t\t<text class=\"yticon icon-you\"></text>\r\n\t\t\t</view> -->\r\n\r\n\t\t\t<view class=\"c-row b-b\">\r\n\t\t\t\t<text class=\"tit\">服务</text>\r\n\t\t\t\t<view class=\"bz-list con\">\r\n\t\t\t\t\t<text>商品如有问题请尽快和客服联系</text>\r\n\t\t\t\t\t<!-- <text>假一赔十 ·</text> -->\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"c-row b-b\" @click=\"toggleParam\">\r\n\t\t\t\t<text class=\"tit\">参数</text>\r\n\t\t\t\t<view class=\"con\"><text>点击查看商品参数</text></view>\r\n\t\t\t\t<text class=\"yticon icon-you\"></text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"coupons\" @click=\"toggleCoupons\">\r\n\t\t\t<text class=\"coupon_title\">优惠</text>\r\n\t\t\t<view class=\"coupons_name\">\r\n\t\t\t\t<text class=\"coupon_name\">点击查看优惠券</text>\r\n\t\t\t\t<!-- <view class=\"coupon_name\" v-for=\"(coupon,index) in coupons\" :key=\"index\">{{coupon.name}},</view> -->\r\n\t\t\t</view>\r\n\t\t\t<text class=\"yticon icon-you\"></text>\r\n\t\t</view>\r\n\t\t<!-- 评价 -->\r\n\t\t<!-- <view class=\"eva-section\">\r\n\t\t\t<view class=\"e-header\">\r\n\t\t\t\t<text class=\"tit\">评价</text>\r\n\t\t\t\t<text>(86)</text>\r\n\t\t\t\t<text class=\"tip\">好评率 100%</text>\r\n\t\t\t\t<text class=\"yticon icon-you\"></text>\r\n\t\t\t</view> \r\n\t\t\t<view class=\"eva-box\">\r\n\t\t\t\t<image class=\"portrait\" src=\"http://img3.imgtn.bdimg.com/it/u=1150341365,1327279810&fm=26&gp=0.jpg\" mode=\"aspectFill\"></image>\r\n\t\t\t\t<view class=\"right\">\r\n\t\t\t\t\t<text class=\"name\">Leo yo</text>\r\n\t\t\t\t\t<text class=\"con\">商品收到了，79元两件，质量不错，试了一下有点瘦，但是加个外罩很漂亮，我很喜欢</text>\r\n\t\t\t\t\t<view class=\"bot\">\r\n\t\t\t\t\t\t<text class=\"attr\">购买类型：XL 红色</text>\r\n\t\t\t\t\t\t<text class=\"time\">2019-04-01 19:21</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view> -->\r\n\r\n\t\t<view class=\"detail-desc\">\r\n\t\t\t<view class=\"d-header\"><text>图文详情</text></view>\r\n\t\t\t<rich-text :nodes=\"desc\" class=\"d-desc\"></rich-text>\r\n\t\t</view>\r\n\r\n\t\t<!-- 底部操作菜单 -->\r\n\t\t<view class=\"page-bottom\">\r\n\t\t\t<navigator url=\"/pages/index/index\" open-type=\"switchTab\" class=\"p-b-btn\">\r\n\t\t\t\t<text class=\"yticon icon-xiatubiao--copy\"></text>\r\n\t\t\t\t<text>首页</text>\r\n\t\t\t</navigator>\r\n\t\t\t<navigator url=\"/pages/cart/cart\" open-type=\"switchTab\" class=\"p-b-btn\">\r\n\t\t\t\t<text class=\"yticon icon-gouwuche\"></text>\r\n\t\t\t\t<text>购物车</text>\r\n\t\t\t</navigator>\r\n\t\t\t<!-- <view class=\"p-b-btn\" :class=\"{active: favorite}\" @click=\"toFavorite\">\r\n\t\t\t\t<text class=\"yticon icon-shoucang\"></text>\r\n\t\t\t\t<text>收藏</text>\r\n\t\t\t</view> -->\r\n\r\n\t\t\t<view class=\"action-btn-group\">\r\n\t\t\t\t<button type=\"primary\" class=\" action-btn no-border buy-now-btn\" @click=\"buy\">立即购买</button>\r\n\t\t\t\t<button type=\"primary\" class=\" action-btn no-border add-cart-btn\" @click=\"addCartItem\">加入购物车</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 规格-模态层弹窗 -->\r\n\t\t<view class=\"popup spec\" :class=\"skuSelectInfo.specClass\" @touchmove.stop.prevent=\"stopPrevent\" @click=\"toggleSpec\">\r\n\t\t\t<!-- 遮罩层 -->\r\n\t\t\t<view class=\"mask\"></view>\r\n\t\t\t<view class=\"layer attr-content\" @click.stop=\"stopPrevent\">\r\n\t\t\t\t<view class=\"a-t\">\r\n\t\t\t\t\t<image v-bind:src=\"encodeURI(skuSelectInfo.specSrc)\"></image>\r\n\t\t\t\t\t<view class=\"right\">\r\n\t\t\t\t\t\t<text class=\"price\">¥{{ skuSelectInfo.price }}</text>\r\n\t\t\t\t\t\t<text class=\"stock\">库存：{{ skuSelectInfo.stock }}件</text>\r\n\t\t\t\t\t\t<view class=\"selected\">\r\n\t\t\t\t\t\t\t已选：\r\n\t\t\t\t\t\t\t<text class=\"selected-text\" v-for=\"(sItem, sIndex) in specSelected\" :key=\"sIndex\">{{ sItem }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view v-for=\"(item, index) in specList\" :key=\"index\" class=\"attr-list\">\r\n\t\t\t\t\t<text >{{ item.name }}</text>\r\n\t\t\t\t\t<!-- <view class=\"item-list\">\r\n\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\tv-for=\"(sp1Item, sp1Index) in getChildSkuList(sp1List,index)\"\r\n\t\t\t\t\t\t\t:key=\"sp1Index\"\r\n\t\t\t\t\t\t\tclass=\"tit\"\r\n\t\t\t\t\t\t\t:class=\"{ selected: sp1Item.selected }\"\r\n\t\t\t\t\t\t\t@click=\"selectSpec(sp1Item,getChildSkuList(sp1List,index),index,sp1Index)\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{{ sp1Item.name }}\r\n\t\t\t\t\t\t</text>\r\n\t\t\t\t\t</view> -->\r\n\t\t\t\t\t<view class=\"item-list\" v-if=\"index==0\">\r\n\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\tv-for=\"(sp1Item, sp1Index) in sp1List\"\r\n\t\t\t\t\t\t\t:key=\"sp1Index\"\r\n\t\t\t\t\t\t\tclass=\"tit\"\r\n\t\t\t\t\t\t\t:class=\"{ selected: sp1Item.selected }\"\r\n\t\t\t\t\t\t\t@click=\"selectSpec(sp1Item,sp1List,index,sp1Index)\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{{ sp1Item.name }}\r\n\t\t\t\t\t\t</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"item-list\" v-if=\"index==1\">\r\n\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\tv-for=\"(sp1Item, sp1Index) in sp2List\"\r\n\t\t\t\t\t\t\t:key=\"sp1Index\"\r\n\t\t\t\t\t\t\tclass=\"tit\"\r\n\t\t\t\t\t\t\t:class=\"{ selected: sp1Item.selected }\"\r\n\t\t\t\t\t\t\t@click=\"selectSpec(sp1Item,sp2List,index,sp1Index)\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{{ sp1Item.name }}\r\n\t\t\t\t\t\t</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"item-list\" v-if=\"index==2\">\r\n\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\tv-for=\"(sp1Item, sp1Index) in sp3List\"\r\n\t\t\t\t\t\t\t:key=\"sp1Index\"\r\n\t\t\t\t\t\t\tclass=\"tit\"\r\n\t\t\t\t\t\t\t:class=\"{ selected: sp1Item.selected }\"\r\n\t\t\t\t\t\t\t@click=\"selectSpec(sp1Item,sp3List,index,sp1Index)\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{{ sp1Item.name }}\r\n\t\t\t\t\t\t</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"attr-list\">\r\n\t\t\t\t\t<text>数量</text>\r\n\t\t\t\t\t<view class=\"stepper\">\r\n\t\t\t\t\t\t<!-- 减号 -->\r\n\t\t\t\t\t\t<text @click=\"num_less\">-</text>\r\n\t\t\t\t\t\t<!-- 数值 -->\r\n\t\t\t\t\t\t<input type=\"number\" v-bind:value=\"num\" disabled=\"disabled\" />\r\n\t\t\t\t\t\t<!-- 加号 -->\r\n\t\t\t\t\t\t<text @click=\"num_add\">+</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<button class=\"btn\" @click=\"toggleSpec\">完成</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 参数-模态层弹窗 -->\r\n\t\t<view class=\"popup param\" :class=\"paramClass\" @touchmove.stop.prevent=\"stopPrevent\" @click=\"toggleParam\">\r\n\t\t\t<!-- 遮罩层 -->\r\n\t\t\t<view class=\"mask\"></view>\r\n\t\t\t<view class=\"layer attr-content\" @click.stop=\"stopPrevent\">\r\n\t\t\t\t<view class=\"param-header\"><text>产品参数</text></view>\r\n\t\t\t\t<scroll-view class=\"param-content\" scroll-y=\"true\">\r\n\t\t\t\t\t<view class=\"uni-title uni-common-mt p-row\" v-for=\"(param, index) in productParamList\" :key=\"index\">\r\n\t\t\t\t\t\t<text class=\"p-name\">{{ param.name }}</text>\r\n\t\t\t\t\t\t<text class=\"p-value\">{{ param.value }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t\t<button class=\"btn\" @click=\"toggleParam\">完成</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 优惠券模态层弹窗 -->\r\n\t\t<view class=\"coupons_opup\" :class=\"couponsPopuop\" @click=\"toggleCoupons\" @touchmove.stop.prevent=\"stopPrevent\">\r\n\t\t\t<!-- 遮罩层 -->\r\n\t\t\t<view class=\"mask\"></view>\r\n\t\t\t<view class=\"layer attr-content\" @click.stop=\"stopPrevent\">\r\n\t\t\t\t<view class=\"param-header\"><text>优惠</text></view>\r\n\t\t\t\t<scroll-view class=\"param-content\" scroll-y=\"true\">\r\n\t\t\t\t\t<view class=\"param-content_min_title\">领券</view>\r\n\t\t\t\t\t<view class=\"grid col-2 coupon_card\" v-for=\"(item, index) in coupons\" :key=\"index\">\r\n\t\t\t\t\t\t<view class=\"coupon_detils\">\r\n\t\t\t\t\t\t\t<view class=\"grid col-3 coupon_detils_first\">\r\n\t\t\t\t\t\t\t\t<view class=\"coupon_amount_pre\">￥</view>\r\n\t\t\t\t\t\t\t\t<view class=\"coupon_amount\">{{ item.amount }}</view>\r\n\t\t\t\t\t\t\t\t<view class=\"coupon_name\">{{ item.name }}</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"coupon_second\">{{ item.note }},满{{ item.minPoint }}可用</view>\r\n\t\t\t\t\t\t\t<view class=\"coupon_third\">{{ item.startTime }}至{{ item.endTime }}</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"collect_coupon\" @click=\"collectCoupon(item.id)\">立即抢</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t\t<button class=\"btn\" @click=\"toggleCoupons\">完成</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 分享 -->\r\n\t\t<share ref=\"share\" :contentHeight=\"580\" :shareList=\"shareList\"></share>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nimport share from '@/components/share';\r\nimport Api from 'common/js/model.js';\r\nimport { mapState, mapMutations } from 'vuex';\r\n\r\nexport default {\r\n\tcomponents: {\r\n\t\tshare\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapState(['hasLogin', 'userInfo'])\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tnum: 1,\r\n\t\t\tid: null,\r\n\t\t\tskuSelectInfo: {\r\n\t\t\t\tspecClass: 'none',\r\n\t\t\t\tspecSrc: '',\r\n\t\t\t\tprice: 0,\r\n\t\t\t\tstock: 0,\r\n\t\t\t\tspecSelectPid: 1,\r\n\t\t\t\tskuSelectId: 1\r\n\t\t\t},\r\n\t\t\tparamClass: 'none',\r\n\t\t\tcouponsPopuop: 'none',\r\n\t\t\tspecSelected: [],\r\n\t\t\tfavorite: true,\r\n\t\t\tshareList: [],\r\n\t\t\tproductInfo: {},\r\n\t\t\timgList: [],\r\n\t\t\tservices: [],\r\n\t\t\tdesc: ``,\r\n\t\t\tspecList: [\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 1,\r\n\t\t\t\t\tname: '颜色'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 2,\r\n\t\t\t\t\tname: '尺寸'\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tsp1List: [],\r\n\t\t\tsp2List: [],\r\n\t\t\tsp3List: [],\r\n\t\t\tsp4List: [],\r\n\t\t\tspLog:{},\r\n\t\t\tproductParamList: [],\r\n\t\t\tcoupons: [],\r\n\t\t\tspike: false,\r\n\t\t\ttiming: '',\r\n\t\t\tend: ''\r\n\t\t};\r\n\t},\r\n\tasync onLoad(options) {\r\n\t\t//接收传值,id里面放的是标题，因为测试数据并没写id\r\n\t\tthis.id = options.id;\r\n\t\t// if(id){\r\n\t\t// \tthis.$api.msg(`点击了${id}`);\r\n\t\t// }\r\n\t\t//获取商品信息\r\n\t\tthis.getProductInfo();\r\n\t\t//获取商品秒杀信息\r\n\t\tthis.getProductFlashById();\r\n\t\t//获取商品规格列表\r\n\t\tthis.getSkuStockList();\r\n\t\t//获取商品参数列表\r\n\t\tthis.getProductAttributeList();\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapState(['hasLogin'])\r\n\t},\r\n\tmethods: {\r\n\t\t...mapMutations(['login', 'logout']),\r\n\t\tnum_less() {\r\n\t\t\tif (this.num > 1) {\r\n\t\t\t\tthis.num--;\r\n\t\t\t}\r\n\t\t},\r\n\t\tnum_add() {\r\n\t\t\tif (this.num < this.productInfo.stock) {\r\n\t\t\t\tthis.num++;\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetChildSkuList(list,index){\r\n\t\t\tvar child = list\r\n\t\t\tfor(var i =0;i<index;i++){\r\n\t\t\t\tif(child[this.spLog[''+index]]){\r\n\t\t\t\t\tchild = child[this.spLog[''+index]].childList\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn child\r\n\t\t},\r\n\t\tasync getProductInfo() {\r\n\t\t\tvar _self = this;\r\n\t\t\tApi.methods.getProductDetail({ id: _self.id }).then(function(res) {\r\n\t\t\t\tvar data = res.data.data;\r\n\t\t\t\t//防止图片url中中文导致乱码\r\n\t\t\t\tvar reg = new RegExp('http://(?!(\\\\.jpg|\\\\.png|\\\\.gif)).+?(\\\\.jpg|\\\\.png|\\\\.gif)', 'g');\r\n\t\t\t\tvar list = data.detailMobileHtml.match(reg);\r\n\t\t\t\tlist.forEach(item => {\r\n\t\t\t\t\tdata.detailMobileHtml = data.detailMobileHtml.replace(item, encodeURI(item));\r\n\t\t\t\t});\r\n\t\t\t\t// while(data.detailMobileHtml.indexOf('src=\"')!=-1){\r\n\t\t\t\t// \tdata.detailMobileHtml=data.detailMobileHtml.replace('src=\"','v-lazy=\"')\r\n\t\t\t\t// }\r\n\t\t\t\t//data.detailMobileHtml=data.detailMobileHtml.replace(new RegExp('src','gim'),'v-lazy');\r\n\r\n\t\t\t\t//data.detailMobileHtml=data.detailMobileHtml.replace(new RegExp('class=\"wscnph\" src','gm'),'class=\"wscnph\" v-lazy')\r\n\t\t\t\t//1->无忧退货；2->快速退款；3->免费包邮\r\n\t\t\t\tif(data.serviceIds){\r\n\t\t\t\t\tdata.serviceIds.split(',').forEach(item => {\r\n\t\t\t\t\t\tif (item == '1') {\r\n\t\t\t\t\t\t\t_self.services.push('无忧退货');\r\n\t\t\t\t\t\t} else if (item == '2') {\r\n\t\t\t\t\t\t\t_self.services.push('快速退款');\r\n\t\t\t\t\t\t} else if (item == '3') {\r\n\t\t\t\t\t\t\t_self.services.push('免费包邮');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t_self.desc = data.detailMobileHtml;\r\n\t\t\t\t_self.productInfo = data;\r\n\t\t\t\t_self.getCouponsByProductId();\r\n\t\t\t\t_self.imgList.push(data.pic);\r\n\t\t\t\tvar imgs = data.albumPics.split(',');\r\n\t\t\t\t_self.imgList = _self.imgList.concat(imgs);\r\n\t\t\t});\r\n\t\t},\r\n\t\tasync getProductFlashById() {\r\n\t\t\tvar _self = this;\r\n\t\t\t_self.spike = false;\r\n\t\t\tApi.methods.getProductFlashById({ id: _self.id }).then(function(res) {\r\n\t\t\t\tconsole.log('秒杀数据：' + JSON.stringify(res.data));\r\n\t\t\t\t//到达开始时间就显示秒杀模式\r\n\t\t\t\tif (res.data.data) {\r\n\t\t\t\t\tlet endtime = res.data.data.end_date + ' ' + res.data.data.end_time;\r\n\t\t\t\t\tlet env = uni.getSystemInfoSync().platform;\r\n\t\t\t\t\tif ('ios' == env || 'android' == env) {\r\n\t\t\t\t\t\tendtime = endtime.replace(new RegExp(/-/gm), '/');\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_self.end = endtime;\r\n\t\t\t\t\t_self.countTime();\r\n\t\t\t\t\t_self.spike = true;\r\n\t\t\t\t\t_self.productInfo.price = res.data.data.flash_promotion_price;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log('没有秒杀数据');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tcountTime() {\r\n\t\t\t//获取当前时间\r\n\t\t\tvar date = new Date();\r\n\t\t\tvar now = date.getTime();\r\n\t\t\t//设置截止时间\r\n\t\t\tvar endDate = new Date(this.end);\r\n\t\t\tvar end = endDate.getTime();\r\n\t\t\t//时间差\r\n\t\t\tvar leftTime = end - now;\r\n\t\t\t//定义变量 d,h,m,s保存倒计时的时间\r\n\t\t\tvar d, h, m, s;\r\n\t\t\tif (leftTime >= 0) {\r\n\t\t\t\td = Math.floor(leftTime / 1000 / 60 / 60 / 24);\r\n\t\t\t\tif (d < 10) {\r\n\t\t\t\t\td = '0' + d;\r\n\t\t\t\t}\r\n\t\t\t\th = Math.floor(leftTime / 1000 / 60 / 60);\r\n\t\t\t\tif (h < 10) {\r\n\t\t\t\t\th = '0' + h;\r\n\t\t\t\t}\r\n\t\t\t\tm = Math.floor((leftTime / 1000 / 60) % 60);\r\n\t\t\t\tif (m < 10) {\r\n\t\t\t\t\tm = '0' + m;\r\n\t\t\t\t}\r\n\t\t\t\ts = Math.floor((leftTime / 1000) % 60);\r\n\t\t\t\tif (s < 10) {\r\n\t\t\t\t\ts = '0' + s;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//将倒计时赋值到div中\r\n\t\t\tthis.timing = h + ':' + m + ':' + s;\r\n\t\t\t//递归每秒调用countTime方法，显示动态时间效果\r\n\t\t\tsetTimeout(this.countTime, 1000);\r\n\t\t},\r\n\t\tasync getSkuStockList() {\r\n\t\t\tvar _self = this;\r\n\t\t\tApi.methods.getSkuStockList({ id: _self.id }).then(function(res) {\r\n\t\t\t\t//填充sp1List以及视频List\r\n\t\t\t\tconsole.log(res.data.data);\r\n\t\t\t\tlet spList = JSON.parse(res.data.data[0].spData);\r\n\t\t\t\t_self.specList=[]\r\n\t\t\t\tspList.forEach((item, index) => {\r\n\t\t\t\t\t_self.specList.push({\r\n\t\t\t\t\t\tid: index+1,\r\n\t\t\t\t\t\tname: item.key\r\n\t\t\t\t\t});\r\n\t\t\t\t\t_self.spLog[''+index]=0\r\n\t\t\t\t});\r\n\t\t\t\tlet length = _self.specList.length;\r\n\t\t\t\tlet sp1List =[]\r\n\t\t\t\tres.data.data.forEach((item,index) => {\r\n\t\t\t\t\tlet list = JSON.parse(item.spData);\r\n\t\t\t\t\tlet sp={\r\n\t\t\t\t\t\tname:list[0].value,\r\n\t\t\t\t\t\tchildList:[],\r\n\t\t\t\t\t\tselected:false,\r\n\t\t\t\t\t\tsku:item\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(!_self.getIsContain(sp1List,sp.name)){\r\n\t\t\t\t\t\tsp1List.push(sp)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsp1List.forEach(item =>{\r\n\t\t\t\t\t\tif(item.name == sp.name){\r\n\t\t\t\t\t\t\tsp =item\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\tfor(var i=1;i<length;i++){\r\n\t\t\t\t\t\tlet childData={\r\n\t\t\t\t\t\t\tname:list[i].value,\r\n\t\t\t\t\t\t\tchildList:[],\r\n\t\t\t\t\t\t\tselected:false,\r\n\t\t\t\t\t\t\tsku:item\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar child = sp.childList\r\n\t\t\t\t\t\tfor(var j=1;j<i;j++){\r\n\t\t\t\t\t\t\tchild = child[child.length-1].childList\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(!_self.getIsContain(child,childData.name)){\r\n\t\t\t\t\t\t\tchild.push(childData)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t_self.sp1List =sp1List\r\n\t\t\t\t// //默认选中第一个\r\n\t\t\t\t_self.selectSpec(sp1List[0],sp1List,0,0)\r\n\t\t\t});\r\n\t\t},\r\n\t\t//查看list中是否包含此元素\r\n\t\tgetIsContain(list,name){\r\n\t\t    var flag=false\r\n\t\t\tlist.forEach(item =>{\r\n\t\t\t\tif(item.name == name){\r\n\t\t\t\t\tflag =true\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\treturn flag\r\n\t\t},\r\n\t\t//获取商品参数列表\r\n\t\tasync getProductAttributeList() {\r\n\t\t\tvar _self = this;\r\n\t\t\tApi.methods.getProductAttributeList({ id: _self.id }).then(function(res) {\r\n\t\t\t\t_self.productParamList = res.data;\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 根据商品获取当前商品可用的优惠券\r\n\t\tgetCouponsByProductId() {\r\n\t\t\tvar _self = this;\r\n\t\t\tApi.methods.getCouponsByProductId(_self.productInfo).then(res => {\r\n\t\t\t\tif (res.data.code == 200) {\r\n\t\t\t\t\t_self.coupons = res.data.data;\r\n\t\t\t\t\tconsole.log(_self.coupons);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t//领取优惠券\r\n\t\tcollectCoupon(couponId) {\r\n\t\t\tvar _self = this;\r\n\t\t\tApi.methods.loadUserInfo().then(function(res) {\r\n\t\t\t\tif (res.data.code === 200) {\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_self.logout();\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '/pages/public/login'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tcouponId = parseFloat(couponId);\r\n\t\t\tApi.methods.receiveCoupon({ couponId: couponId }).then(res => {\r\n\t\t\t\tconsole.log(res);\r\n\t\t\t\tif (res.data.data == 1) {\r\n\t\t\t\t\t_self.$api.msg('领取成功！');\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_self.$api.msg(res.data.data);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t//规格弹窗开关\r\n\t\ttoggleSpec() {\r\n\t\t\tif (this.skuSelectInfo.specClass === 'show') {\r\n\t\t\t\tthis.skuSelectInfo.specClass = 'hide';\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.skuSelectInfo.specClass = 'none';\r\n\t\t\t\t}, 250);\r\n\t\t\t} else if (this.skuSelectInfo.specClass === 'none') {\r\n\t\t\t\tthis.skuSelectInfo.specClass = 'show';\r\n\t\t\t}\r\n\t\t},\r\n\t\t//参数弹窗开关\r\n\t\ttoggleParam() {\r\n\t\t\tif (this.paramClass === 'show') {\r\n\t\t\t\tthis.paramClass = 'hide';\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.paramClass = 'none';\r\n\t\t\t\t}, 250);\r\n\t\t\t} else if (this.paramClass === 'none') {\r\n\t\t\t\tthis.paramClass = 'show';\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 优惠弹窗开关\r\n\t\ttoggleCoupons() {\r\n\t\t\tif (this.couponsPopuop === 'show') {\r\n\t\t\t\tthis.couponsPopuop = 'hide';\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.couponsPopuop = 'none';\r\n\t\t\t\t}, 250);\r\n\t\t\t} else if (this.couponsPopuop === 'none') {\r\n\t\t\t\tthis.couponsPopuop = 'show';\r\n\t\t\t}\r\n\t\t},\r\n\t\t//选择规格SP!\r\n\t\tselectSpec(item,list,index,spIndex) {\r\n\t\t\tif(list!=null){\r\n\t\t\t\tlist.forEach(item1 =>{\r\n\t\t\t\t\titem1.selected = false\r\n\t\t\t\t\tif(item1.childList.length>0){\r\n\t\t\t\t\t\tthis.selectSpec(null,item1.childList)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tif(spIndex!=null&&list&&list.length>0){\r\n\t\t\t\tthis['sp'+(index+2)+'List']=list[spIndex].childList\r\n\t\t\t\tthis.specSelected[index] = item.name\r\n\t\t\t\tif(item.childList.length>0){\r\n\t\t\t\t\tthis.selectSpec(item.childList[0],item.childList,(index+1),0)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(item!=null){\r\n\t\t\t\titem.selected = true;\r\n\t\t\t\tthis.skuSelectInfo.specSrc = item.sku.pic\r\n\t\t\t\tthis.skuSelectInfo.skuSelectId = item.sku.id\r\n\t\t\t\tthis.skuSelectInfo.price = item.sku.price\r\n\t\t\t\tthis.skuSelectInfo.stock = item.sku.stock\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t//分享\r\n\t\tshare() {\r\n\t\t\tthis.$refs.share.toggleMask();\r\n\t\t},\r\n\t\t//收藏\r\n\t\ttoFavorite() {\r\n\t\t\tthis.favorite = !this.favorite;\r\n\t\t},\r\n\t\tbuy() {\r\n\t\t\tthis.loadUserInfo();\r\n\t\t\tif (!this.hasLogin) {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/public/login'\r\n\t\t\t\t});\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl: `/pages/order/createOrder?skuId=` + this.skuSelectInfo.skuSelectId + `&num=` + this.num\r\n\t\t\t});\r\n\t\t},\r\n\t\tstopPrevent() {},\r\n\t\t//添加到购物车\r\n\t\taddCartItem() {\r\n\t\t\tthis.loadUserInfo();\r\n\t\t\tif (!this.hasLogin) {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/public/login'\r\n\t\t\t\t});\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tvar _self = this;\r\n\t\t\tvar param = { productId: _self.id, productSkuId: _self.skuSelectInfo.skuSelectId, quantity: _self.num };\r\n\t\t\tApi.methods.addCartItem(param).then(function(res) {\r\n\t\t\t\tvar result = res.data.data.res;\r\n\t\t\t\tif (result === 1) {\r\n\t\t\t\t\t_self.$api.msg(`添加成功`);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tloadUserInfo() {\r\n\t\t\tvar _self = this;\r\n\t\t\tApi.methods.loadUserInfo().then(function(res) {\r\n\t\t\t\tif (res.data.code === 200) {\r\n\t\t\t\t\tif (_self.hasLogin) {\r\n\t\t\t\t\t\t_self.login(res.data.data);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_self.logout();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n@import 'common/scss/product/product.scss';\r\n</style>\r\n","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./product.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./product.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1594012977603\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}